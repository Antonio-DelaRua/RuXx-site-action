<div class="container">
  <header>
    <h1 class="logo">RuXxDev</h1>

    <!-- Botón hamburguesa para móvil -->
    <button class="menu-toggle" [class.active]="isMobileMenuOpen" (click)="toggleMobileMenu()" aria-label="Toggle menu"
      type="button">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <nav class="nav-menu" [class.active]="isMobileMenuOpen" (click)="$event.stopPropagation()">
      <a (click)="scrollToSection('section-2')">{{ 'NAV.PROJECTS' | translate }}</a>
      <a (click)="scrollToSection('learning-path')">{{ 'NAV.LEARNING' | translate }}</a>
      <a (click)="scrollToSection('certificates')">{{ 'NAV.CERTIFICATES' | translate }}</a>
      <a (click)="scrollToSection('contact')">{{ 'NAV.CONTACT' | translate }}</a>

      <!-- Enlace a Audiolibros -->
      <a *ngIf="isAuthenticated" (click)="goToAudiobooks()" class="audiobooks-link">
        <i class="fas fa-book"></i> Audiolibros
      </a>

      <!-- Estado de autenticación -->
      <div class="auth-section" *ngIf="isAuthenticated">
        <span class="user-info">
          <i class="fas fa-user"></i> {{ userName }}
        </span>
        <button class="logout-btn" (click)="logout()" title="Cerrar sesión">
          <i class="fas fa-sign-out-alt"></i>
        </button>
      </div>

      <!-- Dropdown de Idiomas CORREGIDO -->
      <div class="language-dropdown" (click)="$event.stopPropagation()">
        <button class="language-btn" (click)="toggleLanguageMenu($event)" [class.active]="isLanguageMenuOpen"
          aria-label="Select language" type="button">
          <img [src]="currentFlag"
            [alt]="langService.currentLang === 'es' ? ('NAV.LANGUAGE.ES' | translate) : ('NAV.LANGUAGE.EN' | translate)"
            class="flag-icon" width="20" height="15">
          <i class="fas fa-chevron-down"></i>
        </button>

        <div class="language-menu" [class.active]="isLanguageMenuOpen" (click)="$event.stopPropagation()">
          <div class="language-option" (click)="changeLanguage('es')">
            <img src="assets/opt-spain-flag.webp" alt="Bandera de España" width="28" height="15" loading="lazy">
            <span>{{ 'NAV.LANGUAGE.ES' | translate }}</span>
          </div>
          <div class="language-option" (click)="changeLanguage('en')">
            <img src="assets/uk-flag.webp" alt="Bandera de Reino Unido"  width="28" height="15" loading="lazy">
            <span>{{ 'NAV.LANGUAGE.EN' | translate }}</span>
          </div>
        </div>
      </div>
    </nav>
  </header>
</div>