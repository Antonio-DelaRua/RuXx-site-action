<section class="card-section">
  <div class="prueba">
  <header class="tituloo">
  <h1 class="title-project"> Últimos Proyectos</h1>
</header>
</div>
  <div class="projects-grid">
    <app-card 
      *ngFor="let project of projects" 
      [project]="project">
    </app-card>
  </div>
</section>

<hr>

<section sytle="w-50">
<div class="tree-skills-container" @fadeIn>
  <h2 class="section-title">Tecnologias trabajadas</h2>
  
  <div class="skills-tree">
    <div class="tree-branches">
      @for (skill of skills; track skill.name; let i = $index) {
        <div class="skill-branch" [class.delay-{{i}}]="true">
          <div class="branch-node main-node" 
               [class.expandable]="hasChildren(skill)"
               (click)="hasChildren(skill) ? toggleNode(skill) : null">
            
            <div class="node-content">
              <div class="node-main">
                @if (hasChildren(skill)) {
                  <span class="expand-icon" 
                        [@rotateIcon]="isExpanded(skill) ? 'open' : 'closed'">
                    ▶
                  </span>
                } @else {
                  <span class="leaf-icon">•</span>
                }
                
                <span class="skill-icon">{{ skill.icon }}</span>
                <span class="skill-name">{{ skill.name }}</span>
              </div>
              
              <div class="skill-level">
                <div class="level-bars">
                  @for (bar of getLevelBars(skill.level); track $index) {
                    <span class="level-bar" [class.active]="bar"></span>
                  }
                </div>
                <span class="level-text">Level {{ skill.level }}/5</span>
              </div>
            </div>

            @if (skill.description) {
              <p class="skill-description">{{ skill.description }}</p>
            }
          </div>

          @if (hasChildren(skill) && isExpanded(skill)) {
            <div class="children-container" @slideInOut>
              <div class="children-branch">
                @for (child of skill.children; track child.name) {
                  <div class="skill-branch child-branch">
                    <div class="branch-node" 
                         [class.expandable]="hasChildren(child)"
                         (click)="hasChildren(child) ? toggleNode(child) : null">
                      
                      <div class="node-content">
                        <div class="node-main">
                          @if (hasChildren(child)) {
                            <span class="expand-icon" 
                                  [@rotateIcon]="isExpanded(child) ? 'open' : 'closed'">
                              ▶
                            </span>
                          } @else {
                            <span class="leaf-icon">•</span>
                          }
                          
                          <span class="skill-icon">{{ child.icon }}</span>
                          <span class="skill-name">{{ child.name }}</span>
                        </div>
                        
                        <div class="skill-level">
                          <div class="level-bars">
                            @for (bar of getLevelBars(child.level); track $index) {
                              <span class="level-bar" [class.active]="bar"></span>
                            }
                          </div>
                        </div>
                      </div>

                      @if (child.description) {
                        <p class="skill-description">{{ child.description }}</p>
                      }
                    </div>

                    @if (hasChildren(child) && isExpanded(child)) {
                      <div class="children-container" @slideInOut>
                        <div class="children-branch nested">
                          @for (grandChild of child.children; track grandChild.name) {
                            <div class="skill-branch grandchild-branch">
                              <div class="branch-node leaf-node">
                                <div class="node-content">
                                  <div class="node-main">
                                    <span class="leaf-icon">•</span>
                                    <span class="skill-icon">{{ grandChild.icon }}</span>
                                    <span class="skill-name">{{ grandChild.name }}</span>
                                  </div>
                                  
                                  <div class="skill-level">
                                    <div class="level-bars">
                                      @for (bar of getLevelBars(grandChild.level); track $index) {
                                        <span class="level-bar" [class.active]="bar"></span>
                                      }
                                    </div>
                                  </div>
                                </div>

                                @if (grandChild.description) {
                                  <p class="skill-description">{{ grandChild.description }}</p>
                                }
                              </div>
                            </div>
                          }
                        </div>
                      </div>
                    }
                  </div>
                }
              </div>
            </div>
          }
        </div>
      }
    </div>
  </div>
</div>
</section>
<hr>

