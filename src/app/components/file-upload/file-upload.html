<div class="full-screen-container">
<header class="page-header">
  <button class="back-home-btn" routerLink="/libro">
    ‚¨ÖÔ∏è Mis Libros
  </button>

  <div class="header-content">
    <h1 class="page-title">üìö Subir Nuevo Audiolibro</h1>
  </div>
</header>

<main class="main-content">
  <!-- Progress Bar -->
  <div *ngIf="isUploading" class="progress-section">
    <div class="progress-container">
      <div class="progress-header">
        <h4>Procesando tu archivo...</h4>
        <span class="progress-percentage">{{ uploadProgress }}%</span>
      </div>
      <div class="progress">
        <div
          class="progress-bar progress-bar-striped progress-bar-animated bg-success"
          [style.width]="uploadProgress + '%'"
        ></div>
      </div>
      <p class="progress-text">Extrayendo texto y guardando en la base de datos...</p>
    </div>
  </div>

  <!-- Resultado del procesamiento -->
  <div *ngIf="uploadResult" class="result-card">
    <div class="result-header">
      <div class="success-icon">‚úÖ</div>
      <h3>¬°Archivo procesado exitosamente!</h3>
    </div>
    <br>
    <div class="result-details">
      <div class="detail-item">
        <span class="detail-label">Archivo:</span>
        <span class="detail-value">{{ uploadResult.title }}</span>
      </div>
      <div class="detail-item">
        <span class="detail-label">Texto extra√≠do:</span>
        <span class="detail-value">{{ uploadResult.text_length }} caracteres</span>
      </div>
      <div class="detail-item">
        <span class="detail-label">Fecha de subida:</span>
        <span class="detail-value">{{ uploadResult.upload_date | date:'short' }}</span>
      </div>
    </div>
    <div class="result-actions">
      <button routerLink="/libro" class="btn btn-primary">
        Ver Mis Libros
      </button>
      <button (click)="uploadResult = null; selectedFile = null" class="btn btn-secondary">
        Subir Otro
      </button>
    </div>
  </div>

  <!-- Estado inicial (sin resultado) -->
  <div *ngIf="!uploadResult && !isUploading && !errorMessage" class="upload-container">
    <!-- √Årea de subida de archivos -->
    <div class="upload-section">
      <div class="upload-icon">üìÑ</div>
      <h3>Selecciona tu archivo</h3>
      <p>Arrastra y suelta un archivo PDF o TXT, o haz clic para seleccionar</p>
      <input
        #fileInput
        type="file"
        class="file-input"
        (change)="onFileSelected($event)"
        accept=".pdf,.txt"
        [disabled]="isUploading"
      >
      <button
        type="button"
        class="btn btn-primary btn-lg upload-btn"
        (click)="fileInput.click()"
        [disabled]="isUploading"
      >
        <i class="fas fa-upload"></i> Seleccionar Archivo
      </button>
      <small class="file-formats">Formatos soportados: PDF y TXT (m√°x. 10MB)</small>
    </div>
  </div>

  <!-- Mensajes de error -->
  <div *ngIf="errorMessage" class="error-section">
    <div class="error-card">
      <div class="error-icon">‚ùå</div>
      <h4>Error al procesar el archivo</h4>
      <p>{{ errorMessage }}</p>
      <button
        class="btn btn-outline-primary mt-3"
        (click)="errorMessage = ''"
      >
        Intentar de nuevo
      </button>
    </div>
  </div>
</main>
</div>